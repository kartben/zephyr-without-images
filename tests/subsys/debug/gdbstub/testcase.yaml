#
# Copyright (c) 2020, 2023 intel Corporation.
#
# SPDX-License-Identifier: Apache-2.0
#

tests:
  debug.gdbstub.breakpoints:
    platform_allow: qemu_x86
    harness: pytest
    harness_config:
      pytest_root:
        - "pytest/test_gdbstub.py"
      pytest_args:
        - "--gdb_timeout"
        - "20"
        - "--gdb_script"
        - "test_breakpoints.gdbinit"
        - "--gdb_target_remote"
        - "tcp:127.0.0.1:5678"
    tags:
      - debug
      - gdbstub
    extra_configs:
      # Make sure the gdbstub port chosen is unique for this test to avoid conflicts
      # when Twister runs tests in parallel on the same host.
      - CONFIG_QEMU_EXTRA_FLAGS="-serial tcp:127.0.0.1:5678,server"
