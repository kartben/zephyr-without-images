/*
 * Copyright (c) 2023 Antmicro <www.antmicro.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/dts-v1/;
/* TODO: Adapt GPIO to BG27 instead of using BG22 DTSi */
#include <silabs/efr32bg27.dtsi>
#include <silabs/efr32bg22-pinctrl.dtsi>
#include "thunderboard.dtsi"

/ {
	model = "Silicon Labs EFR32BG27C140F768IM40 Thunderboard-style board";
	compatible = "silabs,efr32bg27c140f768im40", "silabs,efr32bg27";

	/* These aliases are provided for compatibility with samples */
	aliases {
		led0 = &led0;
		sw0 = &button0;
		i2c-pin = &i2c_pin;
		spi-flash0 = &mx25r80;
		spi0 = &usart0;
		watchdog0 = &wdog0;
	};

	leds {
		compatible = "gpio-leds";
		led0: led_0 {
			gpios = <&gpioa GECKO_PIN(4) GPIO_ACTIVE_HIGH>;
			label = "LED 0";
		};
	};
};

&flash0 {
	partitions {
		/* Reserve 32 kB for the bootloader */
		boot_partition: partition@0 {
			label = "mcuboot";
			reg = <0x0 0x00008000>;
			read-only;
		};

		/* Reserve 320 kB for the application in slot 0 */
		slot0_partition: partition@8000 {
			label = "image-0";
			reg = <0x00008000 0x00050000>;
		};

		/* Reserve 320 kB for the application in slot 1 */
		slot1_partition: partition@58000 {
			label = "image-1";
			reg = <0x00058000 0x00050000>;
		};

		/* Reserve 32 kB for the scratch partition */
		scratch_partition: partition@a8000 {
			label = "image-scratch";
			reg = <0x000a8000 0x00008000>;
		};

		/* Set 64Kb of storage at the end of the 768KB of flash */
		storage_partition: partition@b0000 {
			label = "storage";
			reg = <0x000b0000 0x00010000>;
		};

	};
};


&usart0 {
	interrupts = <16 0>, <17 0>;
	interrupt-names = "rx", "tx";
};

&usart1 {
	interrupts = <18 0>, <19 0>;
	interrupt-names = "rx", "tx";
};
