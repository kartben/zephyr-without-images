# Copyright (c) 2020 PHYTEC Messtechnik GmbH
# SPDX-License-Identifier: Apache-2.0

config MODBUS_RTU
	bool "Modbus RTU support"
	depends on SERIAL && SERIAL_HAS_DRIVER

if MODBUS_RTU

config MODBUS_RTU_BUFFER_SIZE
	int "Modbus buffer size"
	default 256
	range 64 256
	help
	  Modbus buffer size.

choice
	prompt "Supported node roles"
	default MODBUS_RTU_ROLE_CLIENT_SERVER
	help
	  Specify the type of supported node roles.

config MODBUS_RTU_ROLE_CLIENT
	bool "Client support"

config MODBUS_RTU_ROLE_SERVER
	bool "Server support"

config MODBUS_RTU_ROLE_CLIENT_SERVER
	bool "Client and server support"

endchoice

config MODBUS_RTU_SERVER
	bool
	default y if MODBUS_RTU_ROLE_SERVER || MODBUS_RTU_ROLE_CLIENT_SERVER

config MODBUS_RTU_CLIENT
	bool
	default y if MODBUS_RTU_ROLE_CLIENT || MODBUS_RTU_ROLE_CLIENT_SERVER

config MODBUS_RTU_ASCII_MODE
	bool "Modbus transmission mode ASCII"
	help
	  Enable ASCII transmission mode.

config MODBUS_RTU_FP_EXTENSIONS
	bool "Floating-Point extensions"
	default y
	help
	  Enable Floating-Point extensions

config MODBUS_RTU_FC08_DIAGNOSTIC
	bool "Enable FC08 Diagnostic support"
	depends on MODBUS_RTU_SERVER
	default y
	help
	  Enable function code 08 Diagnostic support

module = MODBUS_RTU
module-str = Modbus RTU Support
module-help = Sets log level for Modbus RTU support
source "subsys/logging/Kconfig.template.log_config"

endif
